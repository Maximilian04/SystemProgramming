push 100
pop rfx
call :::readFactors
push rbx
push 0
je :zeroA
call :::quadro
hlt
:zeroA
push rcx
push 0
je :zeroAB
push rdx
push rcx
call :::divide
out
hlt
:zeroAB
push rdx
push 0
je :alwaysTrue
push 0
out
push 0
out
push 0
out
hlt
:alwaysTrue
push 9999
out
push 9999
out
push 9999
out
push 9999
out
hlt
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::::::::::Real quadratic equation
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::quadro
call :::calcDiscr
push 0
je :IveGotNoRootsButMyHomeWasNeverOnTheGround
push 0
je :DuppledRoot
push rcx
call :::div2A
pop rcx
push rex
call :::div2A
pop rex
::::::::::rcx(+-)rex - roots
push rcx
push rex
add
push rcx
push rex
sub
out
out
ret
:DuppledRoot
push rcx
call :::div2A
out
ret
:IveGotNoRootsButMyHomeWasNeverOnTheGround
push 0
out
push 0
out
push 0
out
ret
::::::::::::::::::::::::::::::::::::::::
:::div2A
push rbx
call :::divide
push 2
div
ret
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::::::::::calcDiscr calcs discriminant from rbx, rcx, rdx & write to rex in stack zero, or one-zero, or one-one about roots number (ruin rax)
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::calcDiscr
push rcx
push rcx
call :::multiply
push rbx
push rdx
call :::multiply
push 4
mul
pop rex
pop rax
::::::: now in rax b^2, in rex 4*a*c
push rax
push rex
jne :discrIsntZero
push 0
push 1
push 0
pop rex
ret
:discrIsntZero
push rax
push rex
jb :discrIsNegative
push 1
push 1
push rax
push rex
sub
pop rex
push rex
push rfx
mul
call :::sqrt
pop rex
ret
:discrIsNegative
push 0
push 0
pop rex
ret
:
::::::::::::::::::::::::::::::::::::::::
:::multiply
mul
push rfx
div
ret
::::::::::::::::::::::::::::::::::::::::!!!DIVISION RUINS rax
:::divide
pop rax
push rfx
mul
push rax
div
ret
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::::::::::readFactors use rfx as point-factor & write it to rbx, rcx, rdx
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::readFactors
in
push rfx
mul
pop rbx
in
push rfx
mul
pop rcx
in
push rfx
mul
pop rdx
ret
:
::::::::::::::::::::::::::::::::::::::::
:::writeRDX
push rdx
out
ret
::::::::::::::::::::::::::::::::::::::::
:::writeRAX
push rax
out
ret
::::::::::::::::::::::::::::::::::::::::
:::writeRBX
push rbx
out
ret
::::::::::::::::::::::::::::::::::::::::
:::writeRCX
push rcx
out
ret
::::::::::::::::::::::::::::::::::::::::
:::backupRegsExceptA
push rbx
push rcx
push rdx
push rex
push rfx
ret
:
:::restoreRegsExceptA
pop rfx
pop rex
pop rdx
pop rcx
pop rbx
ret
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::::::::::SQRT function (ruin rax)
::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::
:::sqrt
pop rax
call :::backupRegsExceptA
push rax
push 0
push rax
call :::regress
pop rax
pop
call :::restoreRegsExceptA
push rax
ret
::::::::::::::::::::::::::::::::::::::::
:::regress
pop rbx
pop rax
::::::call :::writeRAX
::::::call :::writeRBX
:::::::::::
push rbx
push rax
sub
push 1
ja :else
push rax
ret
:else
:::::::::::
:::::::::::
push rbx
push rax
sub
push 3
jae :alternative
push rax
push 1
add
jmp :alternativeEnd
:alternative
push rax
push 2
div
push rbx
push 2
div
add
:alternativeEnd
pop rcx
:::::::
pop rdx
push rdx
:::::::
push rcx
push rcx
mul
push rdx
ja ::newElse
push rcx
push rbx
call :::regress
ret
::newElse
push rax
push rcx
call :::regress
ret
::::::::::::::::::::::::::::::::::::::::
